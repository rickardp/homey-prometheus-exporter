{"swagger":"2.0","info":{"version":"0.0.0","title":"ManagerFlow","description":"ManagerFlow","termsOfService":"https://legal.athom.com","contact":{"name":"Athom API Team"},"license":{"name":"GPL-3.0"},"x-since":"1.0.0"},"basePath":"/api/manager/flow","x-realtime-namespace":"/realtime/manager/flow/","schemes":["http","https"],"consumes":["application/json"],"produces":["application/json"],"paths":{"/flowcardtrigger":{"get":{"responses":{"200":{"schema":{"type":"array","items":{"$ref":"#/definitions/FlowCardTrigger"}},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"x-homey-filterable":true,"parameters":[],"operationId":"getFlowCardTriggers","security":[{"homey_auth":["homey.flow.readonly"]}]}},"/flowcardtrigger/{uri}/{id}":{"get":{"responses":{"200":{"schema":{"$ref":"#/definitions/FlowCardTrigger"},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"uri","in":"path","required":true,"type":"string"},{"name":"id","in":"path","required":true,"type":"string"}],"operationId":"getFlowCardTrigger","security":[{"homey_auth":["homey.flow.readonly"]}]}},"/flowcardcondition":{"get":{"responses":{"200":{"schema":{"type":"array","items":{"$ref":"#/definitions/FlowCardCondition"}},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"x-homey-filterable":true,"parameters":[],"operationId":"getFlowCardConditions","security":[{"homey_auth":["homey.flow.readonly"]}]}},"/flowcardcondition/{uri}/{id}":{"get":{"responses":{"200":{"schema":{"$ref":"#/definitions/FlowCardCondition"},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"uri","in":"path","required":true,"type":"string"},{"name":"id","in":"path","required":true,"type":"string"}],"operationId":"getFlowCardCondition","security":[{"homey_auth":["homey.flow.readonly"]}]}},"/flowcardcondition/{uri}/{id}/run":{"post":{"responses":{"200":{"schema":{"type":"object","properties":{"result":{"type":"boolean"},"usedTokens":{"type":"object"},"error":{"type":"object"},"elapsedTime":{"type":"number"}}},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"uri","in":"path","required":true,"type":"string"},{"name":"id","in":"path","required":true,"type":"string"},{"name":"data","in":"body","required":true,"schema":{"type":"object","properties":{"args":{"type":"object"},"droptoken":{"type":"string"},"tokens":{"type":"object"},"state":{"type":"object"}}},"x-unpack-parameters":true}],"operationId":"runFlowCardCondition","security":[{"homey_auth":["homey.flow.start"]}]}},"/flowcardaction":{"get":{"responses":{"200":{"schema":{"type":"array","items":{"$ref":"#/definitions/FlowCardAction"}},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"x-homey-filterable":true,"parameters":[],"operationId":"getFlowCardActions","security":[{"homey_auth":["homey.flow.readonly"]}]}},"/flowcardaction/{uri}/{id}":{"get":{"responses":{"200":{"schema":{"$ref":"#/definitions/FlowCardAction"},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"uri","in":"path","required":true,"type":"string"},{"name":"id","in":"path","required":true,"type":"string"}],"operationId":"getFlowCardAction","security":[{"homey_auth":["homey.flow.readonly"]}]}},"/flowcardaction/{uri}/{id}/run":{"post":{"responses":{"200":{"schema":{"type":"object","properties":{"usedTokens":{"type":"object"},"returnTokens":{"type":"object"},"error":{"type":"object"},"elapsedTime":{"type":"number"}}},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"uri","in":"path","required":true,"type":"string"},{"name":"id","in":"path","required":true,"type":"string"},{"name":"data","in":"body","required":true,"schema":{"type":"object","properties":{"args":{"type":"object"},"droptoken":{"type":"string"},"tokens":{"type":"object"},"state":{"type":"object"},"duration":{"type":"number","description":"Duration (optional) in seconds"}}},"x-unpack-parameters":true}],"operationId":"runFlowCardAction","security":[{"homey_auth":["homey.flow.start"]}]}},"/{type}/{uri}/{id}/autocomplete":{"get":{"responses":{"200":{"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"type","in":"path","required":true,"type":"string"},{"name":"uri","in":"path","required":true,"type":"string"},{"name":"id","in":"path","required":true,"type":"string"},{"in":"query","name":"name","type":"string","required":true,"root":true},{"in":"query","name":"query","type":"string","required":true,"root":true},{"in":"query","name":"args","type":"object","required":false,"root":true}],"operationId":"getFlowCardAutocomplete","security":[{"homey_auth":["homey.flow.readonly"]}]}},"/flow":{"get":{"responses":{"200":{"schema":{"type":"object","additionalProperties":{"$ref":"#/definitions/Flow"}},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"x-homey-filterable":true,"parameters":[],"operationId":"getFlows","security":[{"homey_auth":["homey.flow.readonly"]}]},"post":{"responses":{"200":{"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"in":"body","name":"flow","required":true,"schema":{"$ref":"#/definitions/Flow"}}],"operationId":"createFlow","security":[{"homey_auth":["homey.flow"]}]}},"/flow/{id}":{"get":{"responses":{"200":{"schema":{"$ref":"#/definitions/Flow"},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"id","in":"path","required":true,"type":"string"}],"operationId":"getFlow","security":[{"homey_auth":["homey.flow.readonly"]}]},"put":{"responses":{"200":{"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"id","in":"path","required":true,"type":"string"},{"in":"body","name":"flow","required":true,"schema":{"$ref":"#/definitions/Flow"}}],"operationId":"updateFlow","security":[{"homey_auth":["homey.flow"]}]},"delete":{"responses":{"200":{"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"id","in":"path","required":true,"type":"string"}],"operationId":"deleteFlow","security":[{"homey_auth":["homey.flow"]}]}},"/flow/{id}/share":{"post":{"responses":{"200":{"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"id","in":"path","required":true,"type":"string"}],"operationId":"shareFlow","security":[{"homey_auth":["homey.flow.readonly"]}]}},"/flow/test":{"post":{"responses":{"200":{"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"data","in":"body","required":true,"schema":{"type":"object","properties":{"flow":{"$ref":"#/definitions/Flow"},"tokens":{"type":"object"},"sessionId":{"type":"string"}},"required":["flow","tokens"]},"x-unpack-parameters":true}],"operationId":"testFlow","security":[{"homey_auth":["homey.flow"]}]}},"/flow/{id}/trigger":{"post":{"responses":{"200":{"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"id","in":"path","required":true,"type":"string"},{"in":"body","name":"state","schema":{"type":"object"}}],"operationId":"triggerFlow","x-since":"1.5.2","security":[{"homey_auth":["homey.flow.start"]}]}},"/flowfolder":{"get":{"responses":{"200":{"schema":{"type":"object","additionalProperties":{"$ref":"#/definitions/FlowFolder"}},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"x-homey-filterable":true,"parameters":[],"operationId":"getFlowFolders","security":[{"homey_auth":["homey.flow.readonly"]}]},"post":{"responses":{"200":{"schema":{"$ref":"#/definitions/FlowFolder"},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"in":"body","name":"flowfolder","required":true,"schema":{"schema":{"$ref":"#/definitions/FlowFolder"}}}],"operationId":"createFlowFolder","security":[{"homey_auth":["homey.flow"]}]}},"/flowfolder/{id}":{"get":{"responses":{"200":{"schema":{"$ref":"#/definitions/FlowFolder"},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"id","in":"path","required":true,"type":"string"}],"operationId":"getFlowFolder","security":[{"homey_auth":["homey.flow.readonly"]}]},"put":{"responses":{"200":{"schema":{"$ref":"#/definitions/FlowFolder"},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"id","in":"path","required":true,"type":"string"},{"in":"body","name":"flowfolder","required":true,"schema":{"schema":{"$ref":"#/definitions/FlowFolder"}}}],"operationId":"updateFlowFolder","security":[{"homey_auth":["homey.flow"]}]},"delete":{"responses":{"200":{"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"id","in":"path","required":true,"type":"string"}],"operationId":"deleteFlowFolder","security":[{"homey_auth":["homey.flow"]}]}},"/advancedflow":{"get":{"responses":{"200":{"schema":{"type":"object","additionalProperties":{"$ref":"#/definitions/AdvancedFlow"}},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"x-homey-filterable":true,"parameters":[],"operationId":"getAdvancedFlows","security":[{"homey_auth":["homey.flow.readonly"]}]},"post":{"responses":{"200":{"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"in":"body","name":"advancedflow","required":true,"schema":{"$ref":"#/definitions/AdvancedFlow"}}],"operationId":"createAdvancedFlow","security":[{"homey_auth":["homey.flow"]}]}},"/advancedflow/{id}":{"get":{"responses":{"200":{"schema":{"$ref":"#/definitions/AdvancedFlow"},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"id","in":"path","required":true,"type":"string"}],"operationId":"getAdvancedFlow","security":[{"homey_auth":["homey.flow.readonly"]}]},"put":{"responses":{"200":{"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"id","in":"path","required":true,"type":"string"},{"in":"body","name":"advancedflow","required":true,"schema":{"$ref":"#/definitions/AdvancedFlow"}}],"operationId":"updateAdvancedFlow","security":[{"homey_auth":["homey.flow"]}]},"delete":{"responses":{"200":{"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"id","in":"path","required":true,"type":"string"}],"operationId":"deleteAdvancedFlow","security":[{"homey_auth":["homey.flow"]}]}},"/advancedflow/{id}/trigger":{"post":{"responses":{"200":{"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"id","in":"path","required":true,"type":"string"},{"in":"body","name":"state","schema":{"type":"object"}}],"operationId":"triggerAdvancedFlow","security":[{"homey_auth":["homey.flow.start"]}]}}},"definitions":{"Error":{"type":"object","properties":{"code":{"type":"number"},"error":{"type":"string"},"error_description":{"type":"string"},"$stack":{"type":"string"}}},"Flow":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"name":{"type":"string","minLength":1},"enabled":{"type":"boolean"},"folder":{"type":["string","null"],"format":"uuid"},"order":{"type":"number"},"broken":{"x-homey-readonly":true,"type":"boolean"},"triggerable":{"x-homey-readonly":true,"type":"boolean"},"trigger":{"type":"object","required":["uri","id"],"properties":{"uri":{"type":"string"},"id":{"type":"string"},"droptoken":{"type":"string"},"args":{"type":"object"}}},"conditions":{"type":"array","items":{"type":"object","required":["uri","id"],"properties":{"uri":{"type":"string"},"id":{"type":"string"},"droptoken":{"type":"string"},"args":{"type":"object"},"group":{"type":"string","enum":["group1","group2","group3"]},"inverted":{"type":"boolean","default":false}}}},"actions":{"type":"array","items":{"type":"object","required":["uri","id"],"properties":{"uri":{"type":"string"},"id":{"type":"string"},"droptoken":{"type":"string"},"args":{"type":"object"},"group":{"type":"string","enum":["then","else"]},"duration":{"type":["object","null"],"required":["multiplier","number"],"properties":{"multiplier":{"type":"number","minimum":0,"enum":[1,60]},"number":{"type":"string"}}},"delay":{"type":["object","null"],"required":["multiplier","number"],"properties":{"multiplier":{"type":"number","minimum":0,"enum":[1,60]},"number":{"type":"string"}}}}}}},"x-realtime-bindings":{"read":"getFlow","create":"flow.create","update":"flow.update","delete":"flow.delete"}},"FlowCardTrigger":{"type":"object","properties":{"uri":{"type":"string"},"id":{"type":"string"},"args":{"type":"object"},"deprecated":{"type":"boolean"},"droptoken":{"type":"boolean"},"duration":{"type":"boolean"},"uriObj":{"type":"object"},"advanced":{"type":"boolean"},"title":{"type":"string"},"hint":{"type":"string"},"highlight":{"type":"boolean"},"tokens":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"title":{"type":"string"},"hint":{"type":"string"},"type":{"type":"string","enum":["string","number","boolean"]},"example":{"type":["string","number","boolean","null"]}}}}},"x-realtime-bindings":{"read":"getFlowCardTrigger","create":"flowcardtrigger.create","update":"flowcardtrigger.update","delete":"flowcardtrigger.delete"}},"FlowCardCondition":{"type":"object","properties":{"uri":{"type":"string"},"id":{"type":"string"},"args":{"type":"object"},"deprecated":{"type":"boolean"},"droptoken":{"type":"boolean"},"duration":{"type":"boolean"},"uriObj":{"type":"object"},"advanced":{"type":"boolean"},"title":{"type":"string"},"hint":{"type":"string"},"highlight":{"type":"boolean"}},"x-realtime-bindings":{"read":"getFlowCardCondition","create":"flowcardcondition.create","update":"flowcardcondition.update","delete":"flowcardcondition.delete"}},"FlowCardAction":{"type":"object","properties":{"uri":{"type":"string"},"id":{"type":"string"},"args":{"type":"object"},"deprecated":{"type":"boolean"},"droptoken":{"type":"boolean"},"duration":{"type":"boolean"},"uriObj":{"type":"object"},"advanced":{"type":"boolean"},"title":{"type":"string"},"hint":{"type":"string"},"highlight":{"type":"boolean"},"tokens":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string"},"title":{"type":"string"},"hint":{"type":"string"},"type":{"type":"string","enum":["string","number","boolean"]},"example":{"type":["string","number","boolean","null"]}}}}},"x-realtime-bindings":{"read":"getFlowCardAction","create":"flowcardaction.create","update":"flowcardaction.update","delete":"flowcardaction.delete"}},"FlowFolder":{"type":"object","required":["name"],"properties":{"id":{"type":"string"},"name":{"type":"string"},"order":{"type":"number"},"parent":{"type":"string"}},"x-realtime-bindings":{"read":"getFlowFolder","create":"flowfolder.create","update":"flowfolder.update","delete":"flowfolder.delete"}},"AdvancedFlow":{"type":"object","properties":{"id":{"type":"string","format":"uuid","x-homey-updateable":false},"name":{"type":"string"},"enabled":{"type":"boolean"},"broken":{"x-homey-readonly":true,"type":"boolean"},"triggerable":{"x-homey-readonly":true,"type":"boolean"},"folder":{"type":["string","null"],"format":"uuid"},"cards":{"type":"object","additionalProperties":false,"patternProperties":{"^[0-9a-f]{8}-[0-9a-f]{4}-[0-5][0-9a-f]{3}-[089ab][0-9a-f]{3}-[0-9a-f]{12}$":{"type":"object","required":["type","x","y"],"properties":{"type":{"type":"string"},"x":{"type":"number"},"y":{"type":"number"}}}}}},"x-realtime-bindings":{"read":"getAdvancedFlow","create":"advancedflow.create","update":"advancedflow.update","delete":"advancedflow.delete"}}},"x-realtime-events":{"flow.create":{"description":"Fired when a managed Flow is created","parameters":[{"name":"flow","schema":{"$ref":"#/definitions/Flow"},"description":"The affected Flow"}]},"flow.update":{"description":"Fired when a managed Flow is changed","parameters":[{"name":"flow","schema":{"$ref":"#/definitions/Flow"},"description":"The affected Flow"}]},"flow.delete":{"description":"Fired when a managed Flow has been deleted","parameters":[{"name":"flow","schema":{"$ref":"#/definitions/Flow"},"description":"The affected Flow"}]},"flowfolder.create":{"description":"Fired when a managed FlowFolder is created","parameters":[{"name":"flowfolder","schema":{"$ref":"#/definitions/FlowFolder"},"description":"The affected FlowFolder"}]},"flowfolder.update":{"description":"Fired when a managed FlowFolder is changed","parameters":[{"name":"flowfolder","schema":{"$ref":"#/definitions/FlowFolder"},"description":"The affected FlowFolder"}]},"flowfolder.delete":{"description":"Fired when a managed FlowFolder has been deleted","parameters":[{"name":"flowfolder","schema":{"$ref":"#/definitions/FlowFolder"},"description":"The affected FlowFolder"}]},"flowcardtrigger.create":{"description":"Fired when a managed FlowCardTrigger is created","parameters":[{"name":"flowcardtrigger","schema":{"$ref":"#/definitions/FlowCardTrigger"},"description":"The affected FlowCardTrigger"}]},"flowcardtrigger.update":{"description":"Fired when a managed FlowCardTrigger is changed","parameters":[{"name":"flowcardtrigger","schema":{"$ref":"#/definitions/FlowCardTrigger"},"description":"The affected FlowCardTrigger"}]},"flowcardtrigger.delete":{"description":"Fired when a managed FlowCardTrigger has been deleted","parameters":[{"name":"flowcardtrigger","schema":{"$ref":"#/definitions/FlowCardTrigger"},"description":"The affected FlowCardTrigger"}]},"flowcardcondition.create":{"description":"Fired when a managed FlowCardCondition is created","parameters":[{"name":"flowcardcondition","schema":{"$ref":"#/definitions/FlowCardCondition"},"description":"The affected FlowCardCondition"}]},"flowcardcondition.update":{"description":"Fired when a managed FlowCardCondition is changed","parameters":[{"name":"flowcardcondition","schema":{"$ref":"#/definitions/FlowCardCondition"},"description":"The affected FlowCardCondition"}]},"flowcardcondition.delete":{"description":"Fired when a managed FlowCardCondition has been deleted","parameters":[{"name":"flowcardcondition","schema":{"$ref":"#/definitions/FlowCardCondition"},"description":"The affected FlowCardCondition"}]},"flowcardaction.create":{"description":"Fired when a managed FlowCardAction is created","parameters":[{"name":"flowcardaction","schema":{"$ref":"#/definitions/FlowCardAction"},"description":"The affected FlowCardAction"}]},"flowcardaction.update":{"description":"Fired when a managed FlowCardAction is changed","parameters":[{"name":"flowcardaction","schema":{"$ref":"#/definitions/FlowCardAction"},"description":"The affected FlowCardAction"}]},"flowcardaction.delete":{"description":"Fired when a managed FlowCardAction has been deleted","parameters":[{"name":"flowcardaction","schema":{"$ref":"#/definitions/FlowCardAction"},"description":"The affected FlowCardAction"}]},"advancedflow.create":{"description":"Fired when a managed AdvancedFlow is created","parameters":[{"name":"advancedflow","schema":{"$ref":"#/definitions/AdvancedFlow"},"description":"The affected AdvancedFlow"}]},"advancedflow.update":{"description":"Fired when a managed AdvancedFlow is changed","parameters":[{"name":"advancedflow","schema":{"$ref":"#/definitions/AdvancedFlow"},"description":"The affected AdvancedFlow"}]},"advancedflow.delete":{"description":"Fired when a managed AdvancedFlow has been deleted","parameters":[{"name":"advancedflow","schema":{"$ref":"#/definitions/AdvancedFlow"},"description":"The affected AdvancedFlow"}]}},"securityDefinitions":{"homey_auth":{"type":"oauth2","flow":"accessCode","authorizationUrl":"https://api.athom.com/oauth2/authorise","tokenUrl":"https://api.athom.com/oauth2/token","description":"Homey Session Token","scopes":{"homey.flow.readonly":"homey.flow.readonly","homey.flow.start":"homey.flow.start","homey.flow":"homey.flow"}}}}