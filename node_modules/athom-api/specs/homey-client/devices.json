{"swagger":"2.0","info":{"version":"0.0.0","title":"ManagerDevices","description":"ManagerDevices","termsOfService":"https://legal.athom.com","contact":{"name":"Athom API Team"},"license":{"name":"GPL-3.0"},"x-since":"1.0.0"},"basePath":"/api/manager/devices","x-realtime-namespace":"/realtime/manager/devices/","schemes":["http","https"],"consumes":["application/json"],"produces":["application/json"],"paths":{"/device/":{"get":{"responses":{"200":{"schema":{"type":"object","additionalProperties":{"$ref":"#/definitions/Device"}},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"x-homey-filterable":true,"parameters":[],"operationId":"getDevices","security":[{"homey_auth":["homey.device.readonly"]}]}},"/device/{id}":{"get":{"responses":{"200":{"schema":{"$ref":"#/definitions/Device"},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"id","in":"path","required":true,"type":"string"}],"operationId":"getDevice","security":[{"homey_auth":["homey.device.readonly"]}]},"put":{"responses":{"200":{"schema":{"$ref":"#/definitions/Device"},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"in":"path","name":"id","type":"string","required":true},{"in":"body","name":"device","required":true,"schema":{"$ref":"#/definitions/Device"}}],"operationId":"updateDevice","security":[{"homey_auth":["homey.device"]}]},"delete":{"responses":{"200":{"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"id","in":"path","required":true,"type":"string"}],"operationId":"deleteDevice","security":[{"homey_auth":["homey.device"]}]}},"/device/{deviceId}/capability/{capabilityId}":{"put":{"responses":{"200":{"schema":{"type":"object","properties":{"transactionId":{"type":"string"},"value":{"type":"object"}}},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"deviceId","in":"path","required":true,"type":"string"},{"name":"capabilityId","in":"path","required":true,"type":"string"},{"name":"data","in":"body","required":true,"schema":{"type":"object","properties":{"value":{},"opts":{"default":{},"type":"object"},"transactionId":{"type":"string"}},"required":["value"]},"x-unpack-parameters":true}],"operationId":"setCapabilityValue","security":[{"homey_auth":["homey.device.control"]}]}},"/device/{id}/settings_obj":{"get":{"responses":{"200":{"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"id","in":"path","required":true,"type":"string"}],"operationId":"getDeviceSettingsObj","security":[{"homey_auth":["homey.device.readonly"]}]}},"/device/{id}/settings":{"put":{"responses":{"200":{"description":"returns an object containing the actual changed settings and an optional message","schema":{"type":"object","properties":{"oldSettings":{"type":"object"},"newSettings":{"type":"object"},"changedKeys":{"type":"array","items":{"type":"string"}},"message":{"type":"string","description":"An optional description"}}}},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"id","in":"path","required":true,"type":"string"},{"in":"body","name":"settings","required":true,"schema":{"type":"object"}}],"operationId":"setDeviceSettings","security":[{"homey_auth":["homey.device"]}]}},"/capability":{"get":{"responses":{"200":{"schema":{"type":"array","items":{"$ref":"#/definitions/Capability"}},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"x-homey-filterable":true,"parameters":[],"operationId":"getCapabilities","security":[{"homey_auth":["homey.device.readonly"]}]}},"/capability/{uri}/{id}":{"get":{"responses":{"200":{"schema":{"$ref":"#/definitions/Capability"},"description":"Successful response"},"default":{"description":"Error","schema":{"$ref":"#/definitions/Error"}}},"parameters":[{"name":"uri","in":"path","required":true,"type":"string"},{"name":"id","in":"path","required":true,"type":"string"}],"operationId":"getCapability","security":[{"homey_auth":["homey.device.readonly"]}]}}},"definitions":{"Error":{"type":"object","properties":{"code":{"type":"number"},"error":{"type":"string"},"error_description":{"type":"string"},"$stack":{"type":"string"}}},"Device":{"type":"object","properties":{"id":{"x-homey-readonly":true,"type":"string","format":"uuid"},"name":{"type":"string"},"driverUri":{"x-homey-updateable":false,"type":"string"},"driverId":{"x-homey-updateable":false,"type":"string"},"zone":{"type":"string","description":"The id of the device's zone."},"data":{"x-homey-updateable":false,"type":"object"},"icon":{"type":"string"},"iconObj":{"x-homey-updateable":false,"type":"object","properties":{"id":{"type":"string"},"url":{"type":"string"}}},"iconOverride":{"type":["string","null"]},"settings":{"x-homey-updateable":false,"type":"object"},"settingsObj":{"x-homey-updateable":false,"type":"boolean","description":"This property is true when there are settings, getable by the getDeviceSettingsObj method"},"class":{"x-homey-updateable":false,"type":"string"},"energy":{"x-homey-updateable":false,"type":"object","properties":{"approximation":{"type":"object","properties":{"usageOn":{"type":"number"},"usageOff":{"type":"number"},"usageConstant":{"type":"number"}}},"cumulative":{"type":"boolean"},"batteries":{"type":"array","items":{"type":"string"}}}},"energyObj":{"x-homey-updateable":false,"type":"object"},"virtualClass":{"type":["string","null"]},"ui":{"x-homey-updateable":false,"type":"object","properties":{"quickAction":{"type":"string","description":"Optional capabilityId of the quick action"},"components":{"type":"array","items":{"type":"object","properties":{"id":{"type":"string","description":"ID of the UI component"},"capabilities":{"type":"array","description":"An array of capabilityIds","items":{"type":"string"}}}}}}},"uiIndicator":{"type":["string","null"]},"capabilities":{"x-homey-updateable":false,"type":"array","items":{"type":"string"}},"capabilitiesObj":{"x-homey-updateable":false,"type":"object","additionalProperties":{"type":"object","properties":{"id":{"type":"string"},"uri":{"type":"string"},"title":{"type":"string"},"desc":{"type":"string"},"type":{"type":"string","enum":["boolean","number","string","enum"]},"getable":{"type":"boolean"},"setable":{"type":"boolean"},"chartType":{"type":"string","enum":["line","area","stepLine","column","spline","splineArea","scatter"]},"decimals":{"type":"number"},"min":{"type":"number"},"max":{"type":"number"},"step":{"type":"number"},"units":{"type":"string"},"values":{"type":"array","items":{"type":"object","required":["id","title"],"properties":{"id":{"type":"string"},"title":{"type":"string"}}}},"value":{"type":"object"},"lastUpdated":{"type":"string","format":"date-time"},"options":{"type":"object"}}}},"capabilitiesOptions":{"x-homey-updateable":false,"type":"object"},"flags":{"x-homey-readonly":true,"type":"array","items":{"type":"string"}},"ready":{"x-homey-readonly":true,"type":"boolean","description":"A device is when the device's driver is available and ready."},"available":{"x-homey-readonly":true,"type":"boolean","description":"A device can be available or unavailable, decided by the device's driver. If the driver is unavailable, the property `unavailableMessage` might be set. For example, a device can be unavailable when there is no wireless connection possible."},"repair":{"x-homey-readonly":true,"type":"boolean","description":"If true, this device can be repaired using a repair PairSession."},"unpair":{"x-homey-readonly":true,"type":"boolean","description":"If true, this device needs to be deleted using an unpair PairSession."},"unavailableMessage":{"x-homey-readonly":true,"type":"string"},"images":{"type":"array","items":{"type":"object","properties":{"type":{"type":"string","enum":["media","camera"]},"id":{"type":"string"},"imageObj":{"x-base-class":"ManagerImages.Image","x-homey-updateable":false,"type":"object","properties":{"id":{"type":"string"},"ownerUri":{"type":"string"},"url":{"type":"string"},"lastUpdated":{"type":"string","format":"date-time"}}}}}},"insights":{"type":"array","items":{"type":"object","properties":{"uri":{"type":"string"},"id":{"type":"string"},"title":{"type":"string"},"titleTrue":{"type":"string"},"titleFalse":{"type":"string"},"units":{"type":"string"},"decimals":{"type":"number"}}}},"color":{"type":"string"}},"x-realtime-bindings":{"read":"getDevice","create":"device.create","update":"device.update","delete":"device.delete"}},"Capability":{"type":"object","properties":{"id":{"type":"string"},"uri":{"type":"string"},"title":{"type":"string"},"desc":{"type":"string"},"type":{"type":"string","enum":["boolean","number","string","enum"]},"getable":{"type":"boolean"},"setable":{"type":"boolean"},"chartType":{"type":"string","enum":["line","area","stepLine","column","spline","splineArea","scatter"]},"decimals":{"type":"number"},"min":{"type":"number"},"max":{"type":"number"},"step":{"type":"number"},"units":{"type":"string"},"values":{"type":"array","items":{"type":"object","required":["id","title"],"properties":{"id":{"type":"string"},"title":{"type":"string"}}}}},"x-realtime-bindings":{"read":"getCapability","create":"capability.create","update":"capability.update","delete":"capability.delete"}}},"x-realtime-events":{"device.create":{"description":"Fired when a managed Device is created","parameters":[{"name":"device","schema":{"$ref":"#/definitions/Device"},"description":"The affected Device"}]},"device.update":{"description":"Fired when a managed Device is changed","parameters":[{"name":"device","schema":{"$ref":"#/definitions/Device"},"description":"The affected Device"}]},"device.delete":{"description":"Fired when a managed Device has been deleted","parameters":[{"name":"device","schema":{"$ref":"#/definitions/Device"},"description":"The affected Device"}]},"capability.create":{"description":"Fired when a managed Capability is created","parameters":[{"name":"capability","schema":{"$ref":"#/definitions/Capability"},"description":"The affected Capability"}]},"capability.update":{"description":"Fired when a managed Capability is changed","parameters":[{"name":"capability","schema":{"$ref":"#/definitions/Capability"},"description":"The affected Capability"}]},"capability.delete":{"description":"Fired when a managed Capability has been deleted","parameters":[{"name":"capability","schema":{"$ref":"#/definitions/Capability"},"description":"The affected Capability"}]}},"securityDefinitions":{"homey_auth":{"type":"oauth2","flow":"accessCode","authorizationUrl":"https://api.athom.com/oauth2/authorise","tokenUrl":"https://api.athom.com/oauth2/token","description":"Homey Session Token","scopes":{"homey.device.readonly":"homey.device.readonly","homey.device":"homey.device","homey.device.control":"homey.device.control"}}}}